<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cosmic Music Genre and Artist Connections</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet">
  <style>
    #related-posts-graph-container {
      position: relative;
      background-color: #111111; /* Cosmic black background */
      margin: 0 auto;
      width: 100%;
      padding: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #related-posts-graph {
      height: 700px;
      width: 100%;
    }

    .toggle-physics-button {
      background-color: #4a90e2;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      margin-top: 10px;
      cursor: pointer;
      font-size: 16px;
    }

    .toggle-physics-button:hover {
      background-color: #357abd;
    }
  </style>
</head>
<body>

<div id="related-posts-graph-container">
  <div id="related-posts-graph"></div>
  <button class="toggle-physics-button">Enable Physics</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const musicGenresAndArtists = [
      { id: 1, title: "Alice Springs", tags: ["Rock", "Blues", "Producer"], genre: "Rock" },
      { id: 2, title: "Catch the Monkey", tags: ["Indie", "Pop", "Drummer"], genre: "Pop" },
      { id: 3, title: "Glee Club", tags: ["Pop", "Indie", "Arranger"], genre: "Pop" },
      { id: 4, title: "Hank Half Head & the Rambling Turkeys", tags: ["Country", "Folk", "Manager"], genre: "Country" },
      { id: 5, title: "Hank Halfhead And The Rambling Turkeys", tags: ["Country", "Folk", "Manager"], genre: "Country" },
      { id: 6, title: "Interference", tags: ["Alternative", "Rock", "Counselling"], genre: "Alternative" },
      { id: 7, title: "Justin Healy", tags: ["Jazz", "Folk", "Producer", "Drummer"], genre: "Jazz" },
      { id: 8, title: "Lir", tags: ["Rock", "Indie", "Producer", "Manager"], genre: "Rock" },
      { id: 9, title: "Mik Pyro and the Dublin Blues Cartel", tags: ["Blues", "Rock", "Arranger"], genre: "Blues" },
      { id: 10, title: "Satanta", tags: ["Indie", "Pop", "Manager"], genre: "Pop" },
      { id: 11, title: "Sugar Honey", tags: ["Funk", "Soul", "Producer"], genre: "Funk" },
      { id: 12, title: "The 4 Of Us", tags: ["Rock", "Pop", "Drummer"], genre: "Rock" },
      { id: 13, title: "The Bogey Boys", tags: ["Punk", "Rock", "Manager"], genre: "Punk" },
      { id: 14, title: "The Forget Me Nots", tags: ["Indie", "Pop", "Counselling"], genre: "Indie" },
      { id: 15, title: "The Glee Club", tags: ["Pop", "Indie", "Producer"], genre: "Pop" },
      { id: 16, title: "The Golden Horde", tags: ["Rock", "Alternative", "Arranger"], genre: "Rock" },
      { id: 17, title: "the late late show", tags: ["Jazz", "Blues", "Manager"], genre: "Blues" },
      { id: 18, title: "The Racketeers", tags: ["Blues", "Rock", "Producer"], genre: "Blues" }
    ];

    function calculateCircularPositions(nodes, radius, centerX, centerY) {
      const angleStep = (2 * Math.PI) / nodes.length;
      return nodes.map((node, index) => {
        const angle = angleStep * index;
        return {
          id: node.id,
          label: node.label,
          title: node.title,
          x: centerX + radius * Math.cos(angle),
          y: centerY + radius * Math.sin(angle)
        };
      });
    }

    let nodes = musicGenresAndArtists.map(music => ({
      id: music.id,
      label: music.title,
      title: `${music.title}\nGenre: ${music.genre}\nTags: ${music.tags.join(", ")}`,
      color: generateColorForNode(music), // Apply a color based on the genre
      connections: 0, // Placeholder for counting connections
      size: 25 // Default node size
    }));

    function generateColorForNode(music) {
      const colorMap = {
        Rock: '#6A0DAD',      // Purple
        Pop: '#FF4500',       // Orange
        Blues: '#1E90FF',     // Blue
        Funk: '#FFD700',      // Gold
        Country: '#008000',   // Green
        Jazz: '#800080',      // Purple
        Alternative: '#9C27B0',// Violet
        Indie: '#FF6347',     // Tomato
        Punk: '#D32F2F',      // Red
      };
      return colorMap[music.genre] || '#FFFFFF';  // Default to white
    }

    let edges = [];
    musicGenresAndArtists.forEach((music, index) => {
      for (let i = index + 1; i < musicGenresAndArtists.length; i++) {
        const commonTags = music.tags.filter(tag =>
          musicGenresAndArtists[i].tags.includes(tag)
        );
        if (commonTags.length > 0) {
          edges.push({
            from: music.id,
            to: musicGenresAndArtists[i].id,
            label: `Common tags: ${commonTags.join(", ")}`,
            width: commonTags.length * 1.5,
            length: 400,
            color: '#FFD700',  // Golden edges for common tags
            font: {
              color: '#FFFFFF',  // White font for edges
              size: 12
            }
          });
          // Increment the connection count for each node
          nodes[music.id - 1].connections++;
          nodes[musicGenresAndArtists[i].id - 1].connections++;
        }
      }
    });

    // Scale the size of the nodes based on their connections
    nodes = nodes.map(node => {
      const connectionSize = Math.max(25, 25 + node.connections * 5); // Increase size with connections, default min size is 25
      return {
        ...node,
        size: connectionSize
      };
    });

    const centerX = 0;
    const centerY = 0;
    let radius = 800;
    nodes = calculateCircularPositions(nodes, radius, centerX, centerY);

    const container = document.getElementById("related-posts-graph");
    const data = {
      nodes: new vis.DataSet(nodes),
      edges: new vis.DataSet(edges)
    };

    const options = {
      physics: {
        enabled: false
      },
      nodes: {
        color: {
          background: '#4CAF50',
          border: '#2E7D32',
          highlight: {
            background: '#81C784',
            border: '#4CAF50'
          }
        },
        font: {
          color: '#ffffff',
          size: 14
        },
        borderWidth: 2,
        shape: 'dot',
        fixed: {
          x: true,
          y: true
        },
        shadow: {
          enabled: true,
          color: '#000000',
          x: 0,
          y: 0,
          blur: 20
        }
      },
      edges: {
        color: {
          color: '#FFD700', // Golden edges
          highlight: '#FF6347' // Tomato red when highlighted
        },
        smooth: {
          type: 'continuous',
          roundness: 0.5
        },
        font: {
          color: '#FFFFFF', // White edge label font
          size: 12,
          align: 'top'
        }
      },
      interaction: {
        hover: true,
        tooltipDelay: 200,
        navigationButtons: true,
        keyboard: true
      }
    };

    const network = new vis.Network(container, data, options);
    let isPhysicsEnabled = false;
    const toggleButton = document.querySelector(".toggle-physics-button");

    toggleButton.addEventListener("click", function() {
      isPhysicsEnabled = !isPhysicsEnabled;
      if (isPhysicsEnabled) {
        toggleButton.textContent = "Disable Physics";
        radius = 1000; // Increase the radius for more space
        network.setOptions({
          physics: {
            enabled: true,
            stabilization: {
              enabled: true,
              iterations: 1000,
              updateInterval: 25
            },
            barnesHut: {
              gravitationalConstant: -50000,
              centralGravity: 0.03,
              springLength: 500, // Increased spring length
              springConstant: 0.005,
              damping: 0.09,
              avoidOverlap: 1
            },
            repulsion: {
              nodeDistance: 300
            }
          }
        });
      } else {
        toggleButton.textContent = "Enable Physics";
        network.setOptions({
          physics: {
            enabled: false
          }
        });
      }
    });
  });
</script>

</body>
</html>
